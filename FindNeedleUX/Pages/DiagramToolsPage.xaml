<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="FindNeedleUX.Pages.DiagramToolsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FindNeedleUX.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer Padding="20">
        <StackPanel MaxWidth="800">
            <TextBlock Text="Diagram Tools" Style="{StaticResource TitleTextBlockStyle}" Margin="0,0,0,10"/>
            <TextBlock Text="Manage UML diagram generation tools for visualizing log sequences." 
                       Opacity="0.7" Margin="0,0,0,20"/>


            <!-- Install Progress (at top) -->
            <Border x:Name="InstallProgressPanel" Visibility="Collapsed" 
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                    CornerRadius="8" Padding="15" Margin="0,0,0,15">
                <StackPanel>
                    <TextBlock x:Name="InstallProgressText" Text="Installing..." Margin="0,0,0,10"
                               IsTextSelectionEnabled="True" TextWrapping="Wrap"/>
                    <ProgressBar x:Name="InstallProgressBar" IsIndeterminate="True"/>
                </StackPanel>
            </Border>

            <!-- PlantUML Section -->
            <TextBlock Text="PlantUML" FontWeight="SemiBold" FontSize="18" Margin="0,10,0,5"/>
            <TextBlock Text="Generates UML diagrams using Java. Best for detailed sequence diagrams with notes and groups." 
                       Opacity="0.7" FontSize="12" Margin="0,0,0,10"/>
            
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                    CornerRadius="8" Padding="15" Margin="0,5,0,15">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <StackPanel Grid.Column="0" Grid.Row="0" Orientation="Horizontal">
                        <TextBlock x:Name="PlantUmlStatusIcon" Text="?" Margin="0,0,10,0" FontSize="16" VerticalAlignment="Center"/>
                        <TextBlock x:Name="PlantUmlStatusText" Text="Checking..." FontSize="14" VerticalAlignment="Center"/>
                    </StackPanel>
                    
                    <TextBlock x:Name="PlantUmlPathDisplay" Grid.Row="1" Grid.Column="0" 
                               Text="" Opacity="0.5" FontSize="11" TextTrimming="CharacterEllipsis" Margin="26,5,0,0"/>
                    
                    <TextBlock x:Name="PlantUmlVersionDisplay" Grid.Row="2" Grid.Column="0" 
                               Text="" Opacity="0.5" FontSize="11" Margin="26,2,0,0"/>
                    
                    <StackPanel Grid.Column="1" Grid.RowSpan="3" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0,0,0">
                        <Button x:Name="TestPlantUmlButton" Content="Test" Click="TestPlantUml_Click" Width="60" Margin="0,0,5,0"/>
                        <Button x:Name="InstallPlantUmlButton" Content="Install" Click="InstallPlantUml_Click" Width="80"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Mermaid Section -->
            <TextBlock Text="Mermaid CLI" FontWeight="SemiBold" FontSize="18" Margin="0,10,0,5"/>
            <TextBlock Text="Generates diagrams using Node.js. Great for web-friendly output and simpler diagrams." 
                       Opacity="0.7" FontSize="12" Margin="0,0,0,10"/>
            
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                    CornerRadius="8" Padding="15" Margin="0,5,0,15">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <StackPanel Grid.Column="0" Grid.Row="0" Orientation="Horizontal">
                        <TextBlock x:Name="MermaidStatusIcon" Text="?" Margin="0,0,10,0" FontSize="16" VerticalAlignment="Center"/>
                        <TextBlock x:Name="MermaidStatusText" Text="Checking..." FontSize="14" VerticalAlignment="Center"/>
                    </StackPanel>
                    
                    <TextBlock x:Name="MermaidPathDisplay" Grid.Row="1" Grid.Column="0" 
                               Text="" Opacity="0.5" FontSize="11" TextTrimming="CharacterEllipsis" Margin="26,5,0,0"/>
                    
                    <TextBlock x:Name="MermaidVersionDisplay" Grid.Row="2" Grid.Column="0" 
                               Text="" Opacity="0.5" FontSize="11" Margin="26,2,0,0"/>
                    
                    <StackPanel Grid.Column="1" Grid.RowSpan="3" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0,0,0">
                        <Button x:Name="TestMermaidButton" Content="Test" Click="TestMermaid_Click" Width="60" Margin="0,0,5,0"/>
                        <Button x:Name="InstallMermaidButton" Content="Install" Click="InstallMermaid_Click" Width="80"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Install Directory Info -->
            <TextBlock Text="Installation Directory" FontWeight="SemiBold" Margin="0,20,0,5"/>
            <TextBlock x:Name="InstallDirectoryText" Text="" Opacity="0.6" FontSize="11" 
                       IsTextSelectionEnabled="True" TextWrapping="Wrap"/>
            
            <StackPanel Orientation="Horizontal" Margin="0,10,0,0" Spacing="10">
                <Button Content="Open Install Folder" Click="OpenInstallFolder_Click"/>
                <Button Content="Open Test Output Folder" Click="OpenTestOutputFolder_Click"/>
                <Button Content="Open Command Prompt" Click="OpenCommandPrompt_Click"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page>
